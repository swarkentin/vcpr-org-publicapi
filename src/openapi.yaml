openapi: 3.0.3
info:
  title: VCPR.ORG Protocol Editor API
  version: 2.1.0
  contact:
    name: 'Jim Ehrlich, DVM'
    url: 'https://github.com/VCPR-ORG/publicAPI'
    email: jehrlich@vcpr.org
  description: 'API serving the Veterinary Protocol Manager&trade; application. &copy; DairySight LLC, Argyle NY 2020'
servers:
  - description: 'Production server, uses production database.'
    url: 'https://VCPR.ORG'
  - description: 'Staging server, uses staging database.'
    url: 'https://stage.VCPR.ORG'
  - description: 'Test server, uses regenerated test database.'
    url: 'https://test.VCPR.ORG'
  - description: Local server.
    url: 'http://localhost'
paths:
  /editor:
    get:
      operationId: loadEditor
      description: load Protocol Editor
      responses:
        '200':
          description: load Protocol Editor
          content:
            text/html:
              schema: {}
        '401':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - SAOR
        - VOR
  /farm:
    get:
      operationId: loadFarmApp
      description: load Farm App
      responses:
        '200':
          description: load Farm App
          content:
            text/html:
              schema: {}
        '401':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - SAOR
        - VOR
        - MOR
  /admin:
    get:
      operationId: loadAdminApp
      description: load Admin app
      responses:
        '200':
          description: load SPA
          content:
            text/html:
              schema: {}
        '401':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - SAOR
  /api/users:
    get:
      operationId: getUsers
      summary: list of Users IDs
      description: Returns the ID and names of all active Users of the type(s) specified.
      parameters:
        - name: usertypes
          in: path
          description: User types to include
          required: true
          schema:
            type: array
            items:
              type: string
            default:
              - VOR
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  vors:
                    type: array
                    items:
                      type: object
                      properties:
                        users:
                          description: User's ID
                          type: integer
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
      tags:
        - VOR
    put:
      operationId: updateUser
      summary: update user data
      description: Users may update their own data. A VOR may also update User data of a User in a `CLIENT` relationship with that VOR. A SAOR may update data of any User.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                user:
                  $ref: '#/components/schemas/User'
        required: true
      responses:
        '200':
          description: User updated
          content:
            application/json:
              schema:
                properties:
                  updated-records:
                    description: number of db records altered
                    type: integer
        '400':
          $ref: '#/components/responses/BadRequest'
      tags:
        - ALL_USERS
  /api/users/vors:
    get:
      operationId: getVORs
      summary: list of VORs
      description: list of VOR users.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                properties:
                  vors:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          description: User's ID
                          type: integer
                        name:
                          description: User's Name
                          type: string
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
      tags:
        - VOR
  /api/users/logins:
    post:
      operationId: userLogin
      summary: user login
      description: 'Authenticate a User and the app requesting a token, returning a token for use in future secured requests.'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                apikey:
                  description: An API key assigned to an application for access to this API. To request a free API key please contact the system administrator.
                  type: string
                  example: t0CGzpQ4cgu1OBy44sBt
                identifier:
                  description: '`User.uname`, normally the same as `User.email`'
                  type: string
                  example: someUser
                password:
                  description: User password
                  type: string
                  example: somePassword
                  minLength: 8
              required:
                - apikey
                - identifier
                - password
        required: true
      responses:
        '200':
          description: Successful login
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessfulLogin'
        '400':
          $ref: '#/components/responses/BadRequest'
      security: []
      tags:
        - ALL_USERS
    get:
      operationId: renewUserToken
      summary: renew token
      description: Renews the User's access token for use in future secured requests.
      responses:
        '200':
          description: Success – token refreshed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessfulLogin'
        '401':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - ALL_USERS
      x-reviewed: JLE 2022/5/30
  '/api/users/{id}':
    get:
      operationId: getUser
      summary: get user data
      description: Returns User data as specified by User `id`. Any User may get their own data. A VOR may get User data of Users in a `CLIENT` relationship with that VOR. A SAOR may get data of any User.
      parameters:
        - name: id
          in: path
          description: User ID key
          required: true
          schema:
            type: integer
          example: 2
      responses:
        '200':
          description: User
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    $ref: '#/components/schemas/User'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - ALL_USERS
    delete:
      operationId: deleteUser
      summary: delete user
      description: This endpoint supports the (reversible) "delete" of a User by setting user.status to `REMOVED`. Removed Users are not visible in normal queries.
      parameters:
        - name: id
          in: path
          description: User ID key
          required: true
          schema:
            type: integer
          example: 5
      responses:
        '200':
          description: User deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  deleted:
                    description: number of Users deleted
                    type: integer
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
      tags:
        - SAOR
        - VOR
      x-no-test: true
  '/api/visits/{id}':
    get:
      operationId: getVisits
      summary: list of all
      description: list of .
      parameters:
        - name: id
          in: path
          description: User ID key
          required: true
          schema:
            type: integer
          example: 2
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                properties:
                  visits:
                    type: array
                    items:
                      $ref: '#/components/schemas/Login'
      tags:
        - ALL_USERS
  /api/users/sandboxClient:
    post:
      operationId: createSandboxClient
      summary: create a sandbox user
      description: 'Create a sandbox user of MOR `UserType` who is a `CLIENT` of logged-in VOR. This allows the VOR to prescribe to the sandbox client, then view prescriptions from the client''s point of view using the Farm App.'
      requestBody:
        content:
          application/json:
            schema:
              description: The username for the sandbox client. This must not match an existing `User.username`
              type: string
        required: true
      responses:
        '200':
          description: Sandbox user created
          content:
            application/json:
              schema:
                type: object
                properties:
                  sandboxClient:
                    description: username of sandbox client
                    type: string
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
    delete:
      operationId: deleteSandboxClient
      summary: delete sandboxClient
      description: 'Delete the User and CLIENT Relation records from the database,  irreversibly removing the sandbocx client, but not any existing Prescriptions.'
      responses:
        '200':
          description: Sandbox user deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  deleted:
                    description: number of Users deleted
                    type: integer
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - SAOR
        - VOR
  /api/users/addresses:
    put:
      operationId: updateAddress
      summary: update address
      description: A User may update their own address.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                user:
                  $ref: '#/components/schemas/User'
        required: true
      responses:
        '200':
          description: User updated
          content:
            application/json:
              schema:
                properties:
                  updated-records:
                    description: number of db records altered
                    type: integer
        '401':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - ALL_USERS
  '/api/users/addresses/{id}':
    get:
      operationId: getAddress
      summary: address of user
      description: Address of user specified by `id`.
      parameters:
        - name: id
          in: path
          description: User ID key
          required: true
          schema:
            type: integer
          example: 2
      responses:
        '200':
          description: User
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    $ref: '#/components/schemas/Address'
        '401':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - ALL_USERS
      x-reviewed: JLE 2022/5/31
  /api/users/profiles:
    put:
      operationId: updateProfile
      summary: update profile
      description: A User may update their own profile.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                user:
                  $ref: '#/components/schemas/Profile'
        required: true
      responses:
        '200':
          description: User updated
          content:
            application/json:
              schema:
                properties:
                  updated-records:
                    description: number of db records altered
                    type: integer
        '401':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - ALL_USERS
      x-reviewed: JLE 2022/5/31
    post:
      operationId: createProfile
      summary: create profile
      description: 'Create a User with Address, and UserPrefs.'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                user:
                  $ref: '#/components/schemas/Profile'
        required: true
      responses:
        '200':
          description: the created Profile
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Profile'
        '401':
          $ref: '#/components/responses/Unauthorized'
  '/api/users/profiles/{id}':
    get:
      operationId: getProfile
      summary: Profile of user
      description: Profile of user specified by `id`.
      parameters:
        - name: id
          in: path
          description: User ID key
          required: true
          schema:
            type: integer
          example: 2
      responses:
        '200':
          description: User
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    $ref: '#/components/schemas/Address'
        '401':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - ALL_USERS
  '/api/users/token/{token}':
    get:
      operationId: confirmToken
      description: used for clickable link to confirm a token sent in email.
      responses:
        '200':
          '401': null
          description: OK
          content:
            text/html:
              schema:
                description: web page confirmation.
                type: string
                format: html
          $ref: '#/components/responses/Unauthorized'
      tags:
        - ALL_USERS
  /api/users/withholds:
    get:
      operationId: getWithholds
      summary: withholds
      description: get withholds that include present or future time.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                properties:
                  labels:
                    type: array
                    items:
                      $ref: '#/components/schemas/Withhold'
      tags:
        - MOR
      x-reviewed: JLE 2022/5/31
  /api/users/comments:
    post:
      operationId: recordComment
      summary: record a User comment
      description: Records a User comment to the database and emails admin. It supports privacy controls.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Comment'
        required: true
      responses:
        '200':
          description: Success – comment recorded
          content:
            application/json:
              schema:
                type: object
                properties:
                  recorded:
                    type: integer
        '400':
          $ref: '#/components/responses/BadRequest'
      tags:
        - ALL_USERS
  /api/users/relations:
    post:
      operationId: getRelations
      summary: add a relationship
      description: 'adds a relationship of the type specified by `name` to the current User, who must be a VOR. Defaults to CLIENT relationship.'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Relationship'
        required: true
      responses:
        '200':
          description: related User
          content:
            application/json:
              schema:
                type: string
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
  /api/users/my-right-relations:
    get:
      operationId: myRightRelations
      summary: get my right-related users
      description: get my right-related users
      parameters:
        - name: relationship
          in: query
          schema:
            $ref: '#/components/schemas/Relationship'
        - name: withAddress
          in: query
          description: whether to return user's addresses too
          schema:
            type: boolean
            default: false
          example: false
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: array of Users
                properties:
                  prescriptions:
                    type: array
                    items:
                      oneOf:
                        - $ref: '#/components/schemas/User'
                        - $ref: '#/components/schemas/Profile'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
    post:
      operationId: createRightRelation
      summary: add a User with relationship
      description: 'This endpoint adds a User and a relationship of the type specified by `name` to the current User, who must be a VOR. Defaults to CLIENT relationship.'
      parameters:
        - name: relationship
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/Relationship'
        - name: usertype
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/UserType'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
        required: true
      responses:
        '200':
          description: related User
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    $ref: '#/components/schemas/User'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
  /api/protocols/prescriptions/by:
    get:
      operationId: getRxBy
      summary: get my prescriptions
      description: get prescriptions prescribed by the current User.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: array of prescriptions accessible to current User
                properties:
                  prescriptions:
                    type: array
                    items:
                      $ref: '#/components/schemas/Prescription'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
  /api/protocols/prescriptions/to:
    get:
      operationId: getRxTo
      summary: get my prescriptions
      description: get prescriptions prescribed to the current User.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: array of prescriptions accessible to current User
                properties:
                  prescriptions:
                    type: array
                    items:
                      $ref: '#/components/schemas/Prescription'
      tags:
        - VOR
  /api/protocols/shares:
    get:
      operationId: getMyProtocolShares
      summary: get my protocol shares
      description: 'This endpoint retrieves a User''s Protocol shares, optionally filtered by Protocol and recipient.'
      parameters:
        - name: pxFilter
          in: query
          description: select only shares of this Protocol ID
          required: false
          schema:
            type: integer
        - name: toFilter
          in: query
          description: select only shares to this VOR User
          required: false
          schema:
            type: integer
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  shares:
                    type: array
                    items:
                      $ref: '#/components/schemas/ProtocolShare'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
    post:
      operationId: createProtocolShare
      summary: create protocol share
      description: This endpoint shares a protocol with another VOR User.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProtocolShare'
        required: true
      responses:
        '200':
          description: protocol shared
          content:
            application/json:
              schema:
                type: object
                properties:
                  shared:
                    description: number of shares created
                    type: integer
                    example: 1
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
    delete:
      operationId: deleteProtocolShare
      summary: delete protocol share
      description: This endpoint retracts a Protocol share with another VOR User.
      parameters:
        - name: pxId
          in: query
          description: Protocol ID
          required: true
          schema:
            type: integer
        - name: toVor
          in: query
          description: ID of VOR to whom Protocol was shared
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success – Protocol share deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  un-shared:
                    description: number of shares deleted
                    type: integer
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
  /api/protocols/sharesToAll/:
    get:
      operationId: getSharesToAll
      summary: list of User's shared protocols
      description: This endpoint retrieves a list of User's protocols shared to all VORs.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  shares:
                    type: array
                    items:
                      type: object
                      properties:
                        pxId:
                          description: Protocol ID
                          type: integer
                        name:
                          description: Protocol name
                          type: string
                        clonable:
                          description: switch to determine whether other VORs are allowed to clone this Protocol
                          type: boolean
                          example: true
              example:
                shares:
                  - pxId: 1
                    name: example protocol
                    clonable: false
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
  '/api/protocols/sharesToAll/{pxId}':
    post:
      operationId: shareToAll
      summary: share Protocol with all VOR Users
      description: This endpoint shares a User's protocol with all VOR Users.
      parameters:
        - name: pxId
          in: path
          description: ID of Protocol to be shared
          required: true
          schema:
            type: integer
          explode: true
        - name: clonable
          in: query
          required: false
          schema:
            type: boolean
          explode: true
      responses:
        '204':
          $ref: '#/components/responses/NoContent'
        '400':
          $ref: '#/components/responses/BadRequest'
      tags:
        - VOR
    delete:
      operationId: unShareToAll
      summary: cancel sharing
      description: wip -- This endpoint probably unshares protocols to all.
      parameters:
        - name: pxId
          in: path
          description: ID of Protocol
          required: true
          schema:
            type: integer
          example: 1
      responses:
        '204':
          description: no content
      tags:
        - VOR
  /api/protocols/amducatags:
    put:
      operationId: getAMDUCATags
      summary: AMDUCA-tag protocol
      description: add tags to protocol per AMDUCA rules
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Protocol'
      responses:
        '200':
          description: Success – updated Protocol
          content:
            application/json:
              schema:
                type: object
                properties:
                  protocol:
                    $ref: '#/components/schemas/Protocol'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
  /api/protocols/tags:
    get:
      operationId: getProtocolTags
      summary: list of all Tags
      description: Returns the full array of tags for protocols and treatments.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                properties:
                  tags:
                    type: array
                    items:
                      $ref: '#/components/schemas/Tag'
      tags:
        - VOR
    post:
      operationId: createTag
      summary: create Tag
      description: Create a Tag.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Tag'
        required: true
      responses:
        '200':
          description: Success –  Tag recorded
          content:
            application/json:
              schema:
                type: object
                properties:
                  tag:
                    $ref: '#/components/schemas/Tag'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - SAOR
  '/api/protocols/tags/{id}':
    delete:
      operationId: deleteTag
      summary: Tag
      description: Delete Tag.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: deleted
          content:
            application/json:
              schema:
                properties:
                  deleted:
                    description: number of db records deleted
                    type: integer
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - SAOR
  /api/protocols/tags/remedies:
    put:
      operationId: executeRemedy
      description: 'Apply a Remedy to a Protocol, returning the fixed Protocol.'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                protocol:
                  $ref: '#/components/schemas/Protocol'
                remedy:
                  $ref: '#/components/schemas/Remedy'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Protocol'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
  /api/protocols/promises:
    get:
      operationId: getPromisess
      summary: list of all Promises
      description: This endpoint returns the full array of available Promises.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                properties:
                  labels:
                    type: array
                    items:
                      $ref: '#/components/schemas/Promise'
      tags:
        - VOR
      x-reviewed: JLE 2022/5/31
    post:
      operationId: createPromise
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - SAOR
  '/api/protocols/promises/{id}':
    get:
      operationId: getProtocolPromisess
      summary: Promises in a Protocol
      description: Return Promises contained within a Protocol.
      parameters:
        - name: id
          in: path
          description: protocol  ID
          required: true
          schema:
            type: integer
          example: 32
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                $ref: '#/components/schemas/LabelClaim'
      tags:
        - VOR
      x-reviewed: JLE 2022/5/31
  /api/protocols:
    get:
      operationId: getMyProtocols
      summary: protocols owned by user
      description: 'Retrieve all Protocols owned by, or shared with, the current User. The default excludes deleted (status DEPRECATED) protocols.'
      parameters:
        - name: status
          in: query
          description: 'filter Protocols to include only Protocols with listed statuses. If this parameter is omitted, the query defaults to all status values **except** DEPRECATED.'
          required: false
          schema:
            type: array
            items:
              $ref: '#/components/schemas/ProtocolStatus'
          explode: false
          style: pipeDelimited
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: array of Protocols
                type: object
                properties:
                  protocols:
                    type: array
                    items:
                      $ref: '#/components/schemas/Protocol'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
    post:
      operationId: createProtocol
      summary: record and validate aprotocol
      description: This endpoint saves and validates a Protocol.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Protocol'
        required: true
      responses:
        '200':
          description: Success – recorded Protocol
          content:
            application/json:
              schema:
                type: object
                properties:
                  protocol:
                    $ref: '#/components/schemas/Protocol'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
    put:
      operationId: updateProtocol
      summary: update protocol
      description: This endpoint updates and validates a Protocol.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Protocol'
      responses:
        '200':
          description: Success – updated Protocol
          content:
            application/json:
              schema:
                type: object
                properties:
                  protocol:
                    $ref: '#/components/schemas/Protocol'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
  /api/protocols/validate:
    put:
      operationId: validateProtocol
      summary: This endpoint validates a protocol without saving it.
      description: This endpoint validates a protocol for prescribing without saving it. It should only be called if the user wants to prescribe a protocol without saving changes. The endpoints to save or update protocols automatically include validation.4
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Protocol'
      responses:
        '200':
          description: Success – updated Protocol
          content:
            application/json:
              schema:
                type: object
                properties:
                  protocol:
                    $ref: '#/components/schemas/Protocol'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
  /api/protocols/eligibilities:
    get:
      operationId: getEligibilities
      summary: list of all eligibilities
      description: 'This endpoint returns an array of Eligibilities from which a User may choose. The ID field is authoritative, i.e., is all that is needed to identify a particular Eligibility.'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: array of eligibilities
                type: object
                properties:
                  eligibilities:
                    type: array
                    items:
                      $ref: '#/components/schemas/Eligibility'
      tags:
        - VOR
    post:
      operationId: createEligibility
      summary: create Eligibility
      description: Creation  a Eligibility.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Eligibility'
        required: true
      responses:
        '200':
          description: Success –  Eligibility recorded
          content:
            application/json:
              schema:
                type: object
                properties:
                  protocol:
                    $ref: '#/components/schemas/Eligibility'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - SAOR
  '/api/protocols/eligibilities/{id}}':
    delete:
      operationId: deleteEligibility
      summary: Eligibility
      description: Delete Eligibility.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: deleted
          content:
            application/json:
              schema:
                properties:
                  deleted:
                    description: number of db records deleted
                    type: integer
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - SAOR
      x-reviewed: JLE 2022/5/31
  /api/protocols/eligibilities/fdaspecies:
    get:
      operationId: getExFDASpecies
      summary: list of fda species
      description: '"Species" is the term FDA uses to describe a class of animals in a label claim.'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: array of FDASpecies
                type: object
                properties:
                  eligibilities:
                    type: array
                    items:
                      $ref: '#/components/schemas/FDASpecies'
      tags:
        - VOR
  /api/protocols/diagnoses:
    get:
      operationId: getDiagnoses
      summary: list of all diagnoses
      description: Returns an array of all coded Diagnoses known to the system.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  diagnoses:
                    type: array
                    items:
                      $ref: '#/components/schemas/Diagnosis'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
    post:
      operationId: createDiagnosis
      summary: create Eligibility
      description: Create  a Diagnosis.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Diagnosis'
        required: true
      responses:
        '200':
          description: Success –  Diagnosis recorded
          content:
            application/json:
              schema:
                type: object
                properties:
                  protocol:
                    $ref: '#/components/schemas/Diagnosis'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - SAOR
  '/api/protocols/diagnoses/{id}':
    delete:
      operationId: deleteDiagnosis
      summary: Diagnosis
      description: Delete Diagnosis.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: deleted
          content:
            application/json:
              schema:
                properties:
                  deleted:
                    description: number of db records deleted
                    type: integer
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - SAOR
      x-reviewed: JLE 2022/5/31
  /api/protocols/libs:
    get:
      operationId: getLibraryProtocols
      summary: list of library protocols
      description: 'This endpoint retrieves all protocols owned by, or shared with, the current User.'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: array of Protocols from public library
                type: object
                properties:
                  protocols:
                    type: array
                    items:
                      $ref: '#/components/schemas/Protocol'
      tags:
        - VOR
  /api/protocols/exclusivestubs:
    get:
      operationId: getExclusivestubs
      summary: list of all diagnoses
      description: returns an array of Pxes .
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: array of pxes owned by the VOR
                type: object
                properties:
                  diagnoses:
                    type: array
                    items:
                      $ref: '#/components/schemas/Px'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
  /api/protocols/dosages:
    post:
      operationId: validateDosage
      summary: validate a structured Dosage
      description: validate a Dosage with SizeFunction and SequewnceFunction returning an test '_dose" description.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DoseFunctions'
        required: true
      responses:
        '200':
          description: _dose
          content:
            application/json:
              schema:
                properties:
                  _dose:
                    description: string representation of submitted Dosage
                    type: string
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
  /api/protocols/libstubs:
    get:
      operationId: getLibraryPxes
      summary: list of library pxes
      description: 'This endpoint returns all the Protocols owned by, or shared with, the current User.'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: array of protocol stubs from public library
                type: object
                properties:
                  pxes:
                    type: array
                    items:
                      $ref: '#/components/schemas/Px'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
  '/api/protocols/{id}':
    get:
      operationId: getProtocol
      summary: retrieve protocol by ID
      description: This endpoint retrieves a Protocol by `protocol.id`.
      parameters:
        - name: id
          in: path
          description: Protocol ID key
          required: true
          schema:
            type: integer
          example: 7
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                properties:
                  protocol:
                    $ref: '#/components/schemas/Protocol'
            text/html:
              schema:
                properties:
                  protocol:
                    $ref: '#/components/schemas/Protocol'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
    delete:
      operationId: deleteProtocol
      summary: delete protocol
      description: Change `protocol.status` to DELETED (this does not actually remove it from the database).
      parameters:
        - name: id
          in: path
          description: Protocol ID key
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Protocol deprecated
          content:
            application/json:
              schema:
                type: object
                properties:
                  deprecated:
                    description: number of Protocols deprecated
                    type: integer
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
  /api/protocols/prescriptions:
    get:
      operationId: getPrescriptions
      summary: list of all diagnoses
      description: This
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: array of prescriptions
                type: object
                properties:
                  diagnoses:
                    type: array
                    items:
                      $ref: '#/components/schemas/Prescription'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
  '/api/protocols/{id}/prescriptions':
    get:
      operationId: getPrescriptionsOfProtocol
      summary: list of all diagnoses
      description: returns an array of Prescriptions
      parameters:
        - name: id
          in: path
          description: Protocol ID key
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: array of prescriptions
                type: object
                properties:
                  diagnoses:
                    type: array
                    items:
                      $ref: '#/components/schemas/Prescription'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
  '/api/protocols/prescriptions/{id}':
    get:
      operationId: XgetPrescription
      summary: retrieve prescription by ID
      description: Retrieve a Prescription by `prescription.id`.
      parameters:
        - name: id
          in: path
          description: Prescription ID key
          required: true
          schema:
            type: string
          example: Vi1y9kbpEj7Upqy7
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                properties:
                  prescription:
                    $ref: '#/components/schemas/Prescription'
            application/pdf:
              schema:
                type: string
                format: binary
            text/html:
              schema:
                type: string
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
  /api/helpkeys:
    get:
      operationId: getHelpkeys
      summary: list of all diagnoses
      description: Returns an array of keys used to identify help messages.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: array of help keys
                type: object
                properties:
                  keys:
                    type: array
                    items:
                      type: string
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - ALL_USERS
  '/api/help/{key}':
    get:
      operationId: getHelp
      summary: help message
      description: 'return a help message, normally to be displayed in a popup help screen.'
      parameters:
        - name: key
          in: path
          description: help screen key
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                properties:
                  help:
                    type: string
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - ALL_USERS
    post:
      operationId: createHelp
      summary: create help screen
      description: Creation  a help screen.
      parameters:
        - name: key
          in: path
          description: help screen key
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HelpScreen'
        required: true
      responses:
        '200':
          description: Success –  help screen recorded
          content:
            application/json:
              schema:
                type: object
                properties:
                  protocol:
                    $ref: '#/components/schemas/HelpScreen'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - SAOR
      x-reviewed: JLE 2022/5/31
    delete:
      operationId: deleteHelp
      summary: delete help screen
      description: Delete help screen.
      parameters:
        - name: key
          in: path
          description: help screen key
          required: true
          schema:
            type: string
      responses:
        '200':
          description: deleted
          content:
            application/json:
              schema:
                properties:
                  deleted:
                    description: number of db records deleted
                    type: integer
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - SAOR
      x-reviewed: JLE 2022/5/31
  /api/labels:
    get:
      operationId: getLabels
      summary: list of all labelclaims
      description: This endpoint returns the full array of drug labels.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                properties:
                  labels:
                    type: array
                    items:
                      $ref: '#/components/schemas/LabelClaim'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
    post:
      operationId: createLabelClaim
      summary: create labelclaim
      description: Creation  a labelclaim.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LabelClaim'
        required: true
      responses:
        '200':
          description: Success –  labelclaim recorded
          content:
            application/json:
              schema:
                type: object
                properties:
                  protocol:
                    $ref: '#/components/schemas/LabelClaim'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - SAOR
    put:
      operationId: updateLabelClaim
      summary: update labelclaim
      description: update a labelclaim.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LabelClaim'
      responses:
        '200':
          description: Success – © Protocol
          content:
            application/json:
              schema:
                type: object
                properties:
                  protocol:
                    $ref: '#/components/schemas/LabelClaim'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - SAOR
  '/api/labels/{id}':
    get:
      operationId: getLabel
      summary: labelclaim
      description: Return specified labelclaim.
      parameters:
        - name: id
          in: path
          description: labelclaim  ID
          required: true
          schema:
            type: integer
          example: 32
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                $ref: '#/components/schemas/LabelClaim'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
      x-reviewed: JLE 2022/5/31
    put:
      operationId: updateLabelClaim
      summary: create help screen
      description: update a labelclaim.
      parameters:
        - name: id
          in: path
          description: labelclaim id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LabelClaim'
        required: true
      responses:
        '200':
          description: Success –  labelclaim updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  protocol:
                    $ref: '#/components/schemas/LabelClaim'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - SAOR
      x-reviewed: JLE 2022/5/31
  '/api/labels/inserts/{lxId}':
    get:
      operationId: getPackageInsert
      summary: package insert
      description: Retrieve the product package insert.
      parameters:
        - name: lxId
          in: path
          description: label ID
          required: true
          schema:
            type: integer
          example: 32
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: string
                format: html
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - VOR
  '/api/spl/{ndc}':
    get:
      operationId: getGbdLinkByNDC
      summary: get detail of a Greenbook Drug as a link
      description: This
      parameters:
        - name: ndc
          in: path
          description: unique hyphenated number with up to 10 digits in 2 or 3 segments as labelerCode-productCode-packageCode. packageCode may not be needed.
          required: true
          schema:
            type: string
          example: 0010-3832
      responses:
        '200':
          description: OK
          content:
            text/html:
              schema:
                description: Standard Product Label as html
                type: string
                format: html
        '303':
          description: Redirect to SPL file served from FDA server
          content:
            text/xml:
              schema:
                description: XML SPL data file served from FDA server
                type: string
                format: xml
      tags:
        - VOR
  '/api/spl/{ndc}/{image}':
    get:
      operationId: getGbdL
      summary: get detail of a Greenbook Drug as a link
      description: This
      parameters:
        - name: ndc
          in: path
          description: unique hyphenated number with up to 10 digits in 2 or 3 segments as labelerCode-productCode-packageCode. packageCode may not be needed.
          required: true
          schema:
            type: string
          example: 0010-3495
        - name: image
          in: path
          description: name of image file
          required: true
          schema:
            type: string
          example: 601588-image-fake.jpg
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: URL link to XML SPL data file
                type: string
                format: url
        '303':
          description: Redirect to SPL file served from FDA server
          content:
            text/xml:
              schema:
                description: XML SPL data file served from FDA server
                type: string
                format: xml
      tags:
        - VOR
  '/api/prescriptions/{id}/':
    get:
      operationId: getPrescription
      summary: retrieve prescription by ID
      description: Retrieve a Prescription by `prescription.id`.
      parameters:
        - name: id
          in: path
          description: Prescription ID key
          required: true
          schema:
            type: string
          example: Vi1y9kbpEj7Upqy7
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                properties:
                  prescription:
                    $ref: '#/components/schemas/Prescription'
            application/pdf:
              schema:
                type: string
                format: binary
            text/html:
              schema:
                type: string
      tags:
        - VOR
    delete:
      operationId: deletePrescription
      summary: recall or decline a prescription
      description: 'Prescriptions are immutable except for metadata, and cannot actually be deleted. This endpoint makes a prescription unavailable for use. If called by the VOR, it sets staus to RECALLED. If called by the MOR to whom it is prescribed, it sets status to DECLINED. New cases  cannot be enrolled if either RECALLED or DECLIENED.'
      parameters:
        - name: key
          in: path
          description: Prescription identifier
          required: true
          schema:
            type: string
      responses:
        '200':
          description: prescription updated
          content:
            application/json:
              schema:
                properties:
                  updated:
                    type: integer
        '401':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
        - MOR
  /api/cases:
    post:
      operationId: enrollCase
      summary: enroll case
      description: Creates a Case linked to a prescription.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Case'
        required: true
      responses:
        '200':
          description: Success – recorded Protocol
          content:
            application/json:
              schema:
                type: object
                properties:
                  case:
                    $ref: '#/components/schemas/Case'
        '400':
          $ref: '#/components/responses/BadRequest'
      tags:
        - VOR
        - MOR
    get:
      operationId: myCases
      summary: list of cases
      description: Get all current cases for this user
      responses:
        '200':
          description: Success – token refreshed
          content:
            application/json:
              schema:
                properties:
                  cases:
                    type: array
                    items:
                      $ref: '#/components/schemas/Case'
        '401':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
  '/api/prescriptions/{rxId}/cases':
    get:
      operationId: myCases
      summary: list  of cases for a rx
      description: Get all current cases for this prescription and this user
      parameters:
        - name: rxId
          in: path
          description: prescription uuid
          required: true
          schema:
            type: string
          example: Vi1y9kbpEj7Upqy7
      responses:
        '200':
          description: Success – token refreshed
          content:
            application/json:
              schema:
                properties:
                  cases:
                    type: array
                    items:
                      $ref: '#/components/schemas/Case'
        '401':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
  /api/users/tasks:
    post:
      operationId: executeTask
      summary: execute task
      description: Mark task status as completed
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AnimalTask'
        required: true
      responses:
        '200':
          description: 'Success, Protocol recorded'
          content:
            application/json:
              schema:
                type: object
                properties:
                  case:
                    $ref: '#/components/schemas/Case'
        '400':
          $ref: '#/components/responses/BadRequest'
      tags:
        - VOR
        - MOR
    get:
      operationId: myRxCases
      summary: list of cases by Rx
      description: Get all current cases for this Rx
      responses:
        '200':
          description: Success – token refreshed
          content:
            application/json:
              schema:
                properties:
                  cases:
                    type: array
                    items:
                      $ref: '#/components/schemas/Case'
        '401':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
  /api/admin/product:
    get:
      operationId: getGbdHeaderArrayByNDC
      summary: get Greenbook Drug summary by NDC pattern
      description: This endpoint returns the summary listing of a Greenbook Drug by NDC pattern.
      parameters:
        - name: ndcProd
          in: query
          description: first section labeler code of a NDC
          required: false
          schema:
            type: integer
        - name: ndcLabeler
          in: query
          description: mid section product code of a NDC
          required: false
          schema:
            type: integer
        - name: ndcBrand
          in: query
          description: end section package code of a NDC
          required: false
          schema:
            type: integer
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Product'
      tags:
        - VOR
  '/api/admin/product/{ndc}':
    get:
      operationId: getGbdHeaderByNDC
      summary: get summary listing of a Greenbook Drug
      description: This endpoint returns the summary listing of a Greenbook Drug by ndc identifier.
      parameters:
        - name: ndc
          in: path
          description: 'unique 10-digit, 3-segment number. labelerCode-productCode-packageCode'
          required: true
          schema:
            type: string
          example: 0061-4321-03
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
            text/html:
              schema:
                type: string
      tags:
        - VOR
  '/api/admin/spl{ndc}':
    get:
      operationId: getSPL
      parameters:
        - name: ndc
          in: path
          description: 'unique 10-digit, 3-segment number. labelerCode-productCode-packageCode'
          required: true
          schema:
            type: string
          example: 0061-4321-03
      responses:
        '401':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - VOR
        - MOR
        - SAOR
  /api/admin/gbd:
    get:
      operationId: getGreenbookDrugs
      summary: greenbook drugs
      description: Return GBDs.
      parameters:
        - name: ndcProd
          in: query
          description: first section labeler code of a NDC
          required: false
          schema:
            type: integer
        - name: ndcLabeler
          in: query
          description: mid section product code of a NDC
          required: false
          schema:
            type: integer
        - name: ndcBrand
          in: query
          description: starting row number in GBD table
          required: false
          schema:
            type: integer
        - name: offset
          in: query
          description: maximum number of rows to return
          required: false
          schema:
            type: integer
        - name: eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJleUp3Y205MmFXUmxja2xFSWpvaVkzSmxaR1Z1ZEdsaGJITWlMQ0p3Y205MmFXUmxja3RsZVNJNkluUmxjM1JXVDFJaWZRPT0iLCJpc3MiOiJwbGF5LXNpbGhvdWV0dGUiLCJle***...
          in: query
          description: end section package code of a NDC
          required: false
          schema:
            type: integer
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/GreenbookDrug'
      tags:
        - SAOR
      x-reviewed: JLE 2022/5/31
    put:
      operationId: updateGreenbookDrugs
      summary: update GBD
      description: M
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GreenbookDrug'
        required: true
      responses:
        '200':
          description: 'Success, GreenbookDrug updated'
          content:
            application/json:
              schema:
                type: object
                properties:
                  case:
                    $ref: '#/components/schemas/GreenbookDrug'
        '400':
          $ref: '#/components/responses/BadRequest'
      tags:
        - SAOR
  '/api/admin/gbd/{ndc}':
    get:
      operationId: getGreenbookDrug
      parameters:
        - name: ndc
          in: path
          description: 'unique 10-digit, 3-segment number. labelerCode-productCode-packageCode'
          required: true
          schema:
            type: string
          example: 0061-4321-03
      responses:
        '401':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - SAOR
  /api/admin/ConfirmVOR:
    put:
      operationId: confirmVOR
      parameters:
        - name: sendEmail
          in: query
          required: false
          schema:
            type: boolean
            default: true
      responses:
        '200':
          description: User
          content:
            application/json:
              schema:
                type: object
                properties:
                  vor:
                    $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/Unauthorized'
      tags:
        - ALL_USERS
components:
  schemas:
    UserType:
      description: |
        an ordered list of User types associated with privilege levels: <br>
        * SAOR: a system administrator with top level privileges
        * VOR: a veterinarian who may create and prescribe protocols
        * MOR: a farm manager to whom protocols may be prescribed, and who may create Cases in a protocol
        * TOR: a farm technician who may execute assigned protocols for assigned cases
        * FARM: an account aggregating MOR and TOR Users
        * CLINIC: an account aggregating multiple VOR Users who work together
        * UNCONFIRMED: an account that has been requested but not confirmed by the owner
        * UNVOR: a User who requests VOR status, with neither email or admin approval
        * UNMOR: a User who requests MOR status but email not yet confirmed
        * PREVOR: a confirmed User who requests VOR status but still lacks either email confirmation or approval by admin
        * REMOVED: the record of a User who is no longer active and may not log in
      type: string
      example: VOR
      enum:
        - SAOR
        - VOR
        - MOR
        - TOR
        - FARM
        - CLINIC
        - UNCONFIRMED
        - PREVOR
        - UNVOR
        - UNMOR
        - REMOVED
    User:
      description: a User of a `UserType` class
      type: object
      properties:
        id:
          description: User ID number
          type: integer
          example: 1
        uname:
          description: username
          type: string
          example: exampleUser
        userType:
          $ref: '#/components/schemas/UserType'
        email:
          description: email address
          type: string
          format: email
          example: exampleUser@email.com
        firstname:
          description: first name
          type: string
          example: Example
        lastname:
          description: last name
          type: string
          example: User
        suffix:
          description: degree or qualifier following the name
          type: string
          example: DVM
      required:
        - id
        - uname
        - userType
        - firstname
        - lastname
    Profile:
      description: User data including Address and preferences
      type: object
      allOf:
        - $ref: '#/components/schemas/User'
        - $ref: '#/components/schemas/Address'
        - $ref: '#/components/schemas/UserPrefs'
      required:
        - id
        - uname
        - userType
        - email
        - firstname
        - lastname
        - suffix
    UserPrefs:
      description: values a user may set to customize performance
      type: object
      properties:
        userId:
          type: integer
        sandboxName:
          type: string
        emailTips:
          type: boolean
        emailNews:
          type: boolean
        rxHeader:
          type: string
      required:
        - userId
        - sandboxName
        - emailTips
        - emailNews
        - rxHeader
    Address:
      description: a mailing address
      type: object
      properties:
        userId:
          type: integer
        busName:
          description: 'business name, if appropriate'
          type: string
          example: testVOR Clinic
        address1:
          description: first line or street address
          type: string
          example: 123 Main St.
        address2:
          description: 'second line of address, if needed'
          type: string
          example: 123 Main St.
        town:
          description: town or city
          type: string
          example: Anytown
        state:
          description: state or province
          type: string
          example: Any State
        zip:
          description: zip or postal code
          type: string
          example: 12345-abcd
        country:
          description: country
          type: string
          example: USA
      required:
        - userId
        - address1
        - address2
        - town
        - state
        - zip
    Relationship:
      description: |
        a link between two Users defining a relationship:

        - CLIENT: MOR User on right is a client of VOR User on left
        - EMPLOYEE: TOR User on right is an employee of MOR User on left
        - MEMBER: VOR User on right is a member of CLINIC on left, or MOR User on right is a manager of FARM on left
      type: string
      example: CLIENT
      enum:
        - CLIENT
        - EMPLOYEE
        - MEMBER
    Remedy:
      description: directions for a proposed solution to a problem
      example:
        _type: models.RestrictionRemedy
        title: exCode
        message: exMessage
        detail: exDetail
      discriminator:
        propertyName: _type
        mapping:
          models.RestrictionRemedy: '#/components/schemas/RestrictionRemedy'
          models.LinkRemedy: '#/components/schemas/LinkRemedy'
          models.SubstituteLabelClaimRemedy: '#/components/schemas/SubstituteLabelClaimRemedy'
          models.PromiseRemedy: '#/components/schemas/PromiseRemedy'
          models.JsonRemedy: '#/components/schemas/JsonRemedy'
      oneOf:
        - $ref: '#/components/schemas/RestrictionRemedy'
        - $ref: '#/components/schemas/LinkRemedy'
        - $ref: '#/components/schemas/SubstituteLabelClaimRemedy'
        - $ref: '#/components/schemas/PromiseRemedy'
        - $ref: '#/components/schemas/JsonRemedy'
    RemedyBase:
      description: the base data common to all the polymorphic Remedy subtypes
      type: object
      properties:
        _type:
          description: 'identifies the Remedy subtype as shown in the Remedy discriminator mapping, like `models.RestrictionRemedy`'
          type: string
        title:
          description: a short descriptive name of the Remedy
          type: string
        message:
          description: a longer description of the Remedy
          type: string
      required:
        - _type
        - title
        - message
    RestrictionRemedy:
      description: Adds `detail` to the protocol instructions in the `Restrictions` section.
      example:
        _type: models.RestrictionRemedy
        title: exCode
        message: exMessage
        detail: exDetail
      allOf:
        - $ref: '#/components/schemas/RemedyBase'
        - type: object
          required:
            - detail
          properties:
            detail:
              type: string
    LinkRemedy:
      description: Adds `detail` to the protocol instructions in the `Restrictions` section.
      properties:
        detail:
          type: string
      allOf:
        - $ref: '#/components/schemas/RemedyBase'
        - type: object
          required:
            - detail
    SubstituteLabelClaimRemedy:
      description: '?.'
      properties:
        substitutes:
          type: array
          items:
            type: integer
      allOf:
        - $ref: '#/components/schemas/RemedyBase'
        - type: object
          required:
            - substitutes
    PromiseRemedy:
      description: Adds Promise to the protocol.
      properties:
        promise:
          $ref: '#/components/schemas/Promise'
      allOf:
        - $ref: '#/components/schemas/RemedyBase'
        - type: object
          required:
            - promise
    JsonRemedy:
      description: '?.'
      properties:
        detail:
          type: object
      allOf:
        - $ref: '#/components/schemas/RemedyBase'
        - type: object
          required:
            - detail
    SuccessfulLogin:
      description: User object and generated auth token
      type: object
      properties:
        user:
          $ref: '#/components/schemas/User'
        token:
          description: add this token in X-Auth-Token header to authenticate future requests
          type: string
          example: eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJleUp3Y205MmFXUmxja2xFSWpvaVkzSmxaR1Z1ZEdsaGJITWlMQ0p3Y205MmFXUmxja3RsZVNJNkluUmxjM1JXVDFJaWZRPT0iLCJpc3MiOiJwbGF5LXNpbGhvdWV0dGUiLCJle***...
        filePolicy:
          description: 'policy object for use in embedded image files, expires in 24 hr'
          type: string
          example: 3da8c83495cb00d216369a355322078106ebc2e5eac78333eb90d00de5611d9a
        fileSignature:
          description: signature for file policy object
          type: string
          example: eyJleHBpcnkiOjE1Nzg3NTY2MDIsIm1heFNpemUiOjEwMDAwMDAwfQ==
      x-postman-variables:
        - type: save
          name: token
          path: .token
    Error:
      description: error response per RFC 7807
      type: object
      properties:
        errorType:
          description: a URI identifier that categorizes the error
          type: string
          example: /errors/incorrect-user-pass
        title:
          description: 'A brief, human-readable message about the error'
          type: string
          example: incorrect username or password
        status:
          description: HTTP status code
          type: integer
          example: 404
        detail:
          description: a human-readable description of the specific error
          type: string
          example: Authentication failed due to incorrect username or password.
        instance:
          description: a URI that identifies the specific occurrence of the error
          type: string
          example: /login/log/abc123
      required:
        - title
        - status
    ProtocolShare:
      description: share a protocol with another VOR User
      type: object
      properties:
        px-id:
          description: the `id` identifier of a Protocol
          type: integer
          example: 1
        share-to:
          description: ID f a VOR User who may use the Protocol identified by pxId
          type: integer
          example: 2
        clonable:
          description: whether User identified by `shareTo` has permission to create a clone and modify the clone
          type: boolean
          example: true
          default: false
    ProtocolStatus:
      description: |
        status markers for protocols, in order of normal usage flow:

        - UNKNOWN: initial status when a protocol is being designed
        - VALIDATED: currently not used, for use when a validation process is implemented
        - PRESCRIBED: after a protocol has been prescribed for at least one client
        - INITIATED: after a protocol has been initiated (i.e., has one or more Cases)
        - RECALLED: protocol may no longer be prescribed and existing prescriptions are recalled
        - DEPRECATED: protocol has been "deleted" by the owner
      type: string
      example: PRESCRIBED
      enum:
        - PRESCRIBED
        - VALIDATED
        - INITIATED
        - DEPRECATED
        - RECALLED
        - DECLINED
        - UNKNOWN
    Instructions:
      description: instructions to execute a protocol
      type: object
      properties:
        considerations:
          description: things to consider before choosing this protocol and in using it
          type: string
          format: html
          example: '<p>This is just an example, not a real protocol.</p>'
        restrictions:
          description: restrictions that apply to using this protocol
          type: string
          format: html
          example: <p>Not for use on real animals.</p>
        dothis:
          description: what to do in executing this protocol
          type: string
          format: html
          example: <h3>Examinations to perform</h3>
        recordthis:
          description: what to record when executing this protocol
          type: string
          format: html
          example: <p>record every step in your notebook.</p>
        success:
          description: what to expect if all goes well
          type: string
          format: html
          example: <p>All problems are gone</p>
        failure:
          description: what may indicate things are this protocol is not working
          type: string
          format: html
          example: <p>One or more problems remain</p>
        references:
          description: references for further information
          type: string
          format: html
          example: '<a href="https://en.wikipedia.org/wiki/Rickrolling">Wikipedia</a>'
    CaseDefinition:
      description: 'information used at the time of case selection to determine whether a particular protocol may be enrolled and the protocol initiated for a particular animal or group of animals (the Case). The Case may be enrolled with the Protocol **only** if the Case meets all requirements of the CaseDefinition and none of the prohibitions. Other information may be advisory, and used at the discretion of the person doing enrollment.'
      type: object
      properties:
        requireId:
          description: the Case must include specific ID/s of animal/s to be enrolled
          type: boolean
          example: false
          default: false
        requireMor:
          description: 'if true, the MOR enrolling the Case must be identified with a Signature'
          type: boolean
          example: false
          default: false
        contraindications:
          description: considerations that prohibit or suggest against use of this Protocol
          type: string
          format: html
          example: <p>prohibited in animals older than than 24 months</p>
          default: ''
        medical:
          description: medical considerations in selecting and implementing this Protocol
          type: string
          format: html
          example: 'if fever is present, consider Protocol 12345 instead.'
        economic:
          description: economic considerations in selecting and implementing this Protocol
          type: string
          format: html
          example: 'culling should be considered as an alternative, as milk production is unlikely to return to normal after treatment'
          default: ''
        note:
          description: optional note
          type: string
          format: html
          example: <p>overcrowding may be contributing to issues</p>
          default: ''
    Comment:
      type: object
      properties:
        userId:
          description: set null or zero if User wishes to be anonymous
          type: integer
          example: 1
          default: null
        public:
          description: 'if false, comment is private to site managers'
          type: boolean
          example: false
          default: false
        comment:
          description: user's comment
          type: string
          example: some comment
      required:
        - comment
    Degree:
      description: an academic degree qualifying a User as a veterinarian
      type: object
      properties:
        school:
          description: institution granting the degree
          type: string
          example: University of ***
        year:
          description: year granted
          type: string
          example: 1999
        license:
          description: veterinary license number
          type: string
          example: 12345
        license-state:
          description: state or province granting the license
          type: string
          example: Maine
        confirmVet:
          description: confirm the user is a veterinarian
          type: boolean
          example: true
          default: false
      required:
        - school
        - year
    FDASpecies:
      description: 'a class of animals recognized by the FDA. In FDA literature this is called a "species", which conflicts with the typical usage of that word. "fdaSpecies" in the labeling domain usually corresponds with "Eligibility" in the Protocol domain.'
      type: array
      items:
        type: string
        enum:
          - beef_cattle
          - veal
          - dairy_cattle
          - cats
          - dogs
          - horses
          - fish
          - goats
          - sheep
          - chickens
          - turkeys
          - swine
          - catfish
          - gamebirds
          - llamas
          - salmon
          - emus
          - bison
          - other
          - unidentified
        example:
          - beef_cattle
          - dairy_cattle
    Eligibility:
      description: |
        A class of animal for which a protocol may be used. Normally the `name` field is all that is shown in the UI, but the `id` is used internally to identify each Eligibility, which should be treated as an immutable object. Changes to the array of Eligibilities in a Protocol are done by changing the array of `id` numbers. Changes to other fields will have no effect at the persistent layer.
      type: object
      properties:
        id:
          description: Eligibility ID number
          type: integer
          example: 1
        name:
          description: A type of animal which is eligible to be treated using a protocol having this Eligibility
          type: string
          example: Beef Cattle
        fdaSpecies:
          $ref: '#/components/schemas/FDASpecies'
      required:
        - id
    Dose:
      description: a single dose to be given at a specified time
      type: object
      properties:
        id:
          description: ID of animal to be dosed
          type: string
          example: Y6768B752
        product:
          description: product name
          type: string
          example: wip
        doseSize:
          $ref: '#/components/schemas/DrugQuantity'
        route:
          description: route of administration
          type: string
          example: wip
        time:
          description: wip ISO-8601-formatted datetime added by the server when the dose is saved
          type: string
          format: date-time
          example: '2020-01-10T22:20:39Z'
        note:
          description: additional information aboutthe dose
          type: string
          format: html
          example: exceeding recommended dose can cause something
      example: '{"id":"B-123","product":"MiracleMed","size":{"size":2,"unit":"ml"},"route":"intramuscular injection","time":"2020-01-10T10:30:37Z"}'
      required:
        - product
        - doseSize
        - time
    SeqSingleDose:
      description: a single dose
      type: object
      properties:
        _type:
          description: identifies class of SequenceFunction
          type: string
          example: models.SeqSingleDose
          enum:
            - models.SeqSingleDose
      required:
        - _type
    SeqPerDay:
      description: a series of equally-spaced doses specified by the total number of doses and an integer number of doses per day
      type: object
      properties:
        _type:
          description: identifies class of SequenceFunction
          type: string
          example: models.SeqPerDay
          enum:
            - models.SeqPerDay
        frequency:
          description: how many doses per day
          type: integer
          example: 2
          default: 1
        totalDoses:
          description: total number of doses
          type: integer
          example: 3
          default: 1
      required:
        - _type
        - frequency
        - totalDoses
    SeqPerDayRange:
      description: a series of equally-spaced doses specified by the total number of doses and an integer number of doses per day
      type: object
      properties:
        _type:
          description: identifies class of SequenceFunction
          type: string
          example: models.SeqPerDayRange
          enum:
            - models.SeqPerDayRange
        frequency:
          description: how many doses per day
          type: integer
          example: 2
          default: 1
        minDoses:
          description: minimum total number of doses
          type: integer
          example: 3
          default: 1
        maxDoses:
          description: maximum total number of doses
          type: integer
          example: 9
          default: 1
      required:
        - _type
        - frequency
        - minDoses
        - maxDoses
    SeqInterval:
      description: a series of equally-spaced doses specified by the total number of doses and time between sequential doses
      type: object
      properties:
        _type:
          description: identifies class of SequenceFunction
          type: string
          example: models.SeqInterval
          enum:
            - models.SeqInterval
        totalDoses:
          description: total number of doses
          type: integer
          example: 3
          default: 1
        interval:
          description: time interval between doses
          type: string
          format: duration
          example: PT8H
          default: PT8H
      required:
        - _type
        - totalDoses
        - interval
    SeqSeries:
      description: an ordered sequence of doses at times specified as time since initiation of the Protocol
      type: object
      properties:
        _type:
          description: identifies class of SequenceFunction
          type: string
          example: models.SeqSeries
          enum:
            - models.SeqSeries
        intervals:
          type: array
          items:
            description: ISO-8601 duration from initiation or previous dose
            type: string
            format: duration
            example:
              - PT0S
              - PT3H
              - PT24H
      required:
        - _type
        - intervals
    SequenceFunction:
      description: function to calculate times for a series of doses
      discriminator:
        propertyName: _type
        mapping:
          models.SeqSingleDose: '#/components/schemas/SeqSingleDose'
          models.SeqPerDay: '#/components/schemas/SeqPerDay'
          models.SeqPerDayRange: '#/components/schemas/SeqPerDayRange'
          models.SeqInterval: '#/components/schemas/SeqInterval'
          models.SeqSeries: '#/components/schemas/SeqSeries'
      oneOf:
        - $ref: '#/components/schemas/SeqSingleDose'
        - $ref: '#/components/schemas/SeqPerDay'
        - $ref: '#/components/schemas/SeqPerDayRange'
        - $ref: '#/components/schemas/SeqInterval'
        - $ref: '#/components/schemas/SeqSeries'
    MassUnit:
      description: unit of mass or weight
      type: string
      example: kg
      enum:
        - lb
        - t
        - dwt
        - gr
        - mg
        - mcg
        - oz
        - g
        - kg
    MassQuantity:
      type: object
      properties:
        dimension:
          description: must be Mass
          type: string
          example: Mass
          enum:
            - Mass
        value:
          description: number of units
          type: number
          example: 50
          default: 1
        symbol:
          $ref: '#/components/schemas/MassUnit'
      required:
        - value
        - symbol
    VolumeUnit:
      description: unit of Volume
      type: string
      example: ml
      enum:
        - pt
        - tbsp
        - µl
        - nl
        - oz
        - dl
        - ml
        - qt
        - L
        - gal
        - c
        - tsp
    VolumeQuantity:
      type: object
      properties:
        dimension:
          description: must be Volume
          type: string
          example: Volume
          enum:
            - Volume
        value:
          description: number of units
          type: number
          example: 3
        symbol:
          $ref: '#/components/schemas/VolumeUnit'
      required:
        - value
        - symbol
    DimensionlessUnit:
      description: dimensionless unit (each)
      type: string
      example: ea
      enum:
        - ea
        - '%'
        - dz
    DimensionlessQuantity:
      type: object
      properties:
        dimension:
          description: must be Dimensionless
          type: string
          example: Dimensionless
          enum:
            - Dimensionless
        value:
          description: number of units
          type: number
          example: 3
        symbol:
          $ref: '#/components/schemas/DimensionlessUnit'
      required:
        - value
        - symbol
    DrugQuantity:
      type: object
      properties:
        quantity:
          oneOf:
            - $ref: '#/components/schemas/MassQuantity'
            - $ref: '#/components/schemas/VolumeQuantity'
            - $ref: '#/components/schemas/DimensionlessQuantity'
      example:
        quantity:
          dimension: Mass
          value: 3
          symbol: oz
      required:
        - quantity
    FixedDoseFunction:
      description: a fixed quantity expressed in any available unit
      type: object
      properties:
        _type:
          description: class of Dose Function
          type: string
          example: models.FixedDoseFunction
          enum:
            - models.FixedDoseFunction
        dose:
          $ref: '#/components/schemas/DrugQuantity'
      example:
        dose:
          quantity:
            dimension: Volume
            value: 3
            symbol: ml
        _type: models.FixedDoseFunction
      required:
        - _type
        - dose
    DoseByWeightFunction:
      description: dose is specified as a quantity per unit of animal weight
      type: object
      properties:
        _type:
          description: class of Dose Function
          type: string
          example: models.DoseByWeightFunction
          enum:
            - models.DoseByWeightFunction
        dose:
          $ref: '#/components/schemas/DrugQuantity'
        perUnit:
          $ref: '#/components/schemas/MassQuantity'
      example:
        dose:
          quantity:
            dimension: Volume
            value: 3
            symbol: ml
        perUnit:
          dimension: Mass
          value: 1
          symbol: kg
        _type: models.DoseByWeightFunction
      required:
        - _type
        - dose
        - perUnit
    LoadingDoseByWeightFunction:
      description: dose is specified as first (loading) dose and following doses per unit of animal weight
      type: object
      properties:
        _type:
          description: class of Dose Function
          type: string
          example: DoseByWeightFunction
          enum:
            - models.DoseByWeightFunction
        firstDose:
          $ref: '#/components/schemas/DrugQuantity'
        followDose:
          $ref: '#/components/schemas/DrugQuantity'
        perUnit:
          $ref: '#/components/schemas/MassQuantity'
      example:
        perUnit:
          dimension: mass
          value: 1
          symbol: kg
        followDose:
          quantity:
            dimension: volume
            value: 3
            symbol: ml
        _type: models.LoadingDoseByWeightFunction
        firstDose:
          quantity:
            dimension: volume
            value: 6
            symbol: ml
      required:
        - _type
        - firstDose
        - followDose
        - perUnit
    DrugQuantityRange:
      type: object
      properties:
        min:
          $ref: '#/components/schemas/DrugQuantity'
        max:
          $ref: '#/components/schemas/DrugQuantity'
      example:
        min:
          quantity:
            dimension: Volume
            value: 3
            symbol: ml
        max:
          quantity:
            dimension: Volume
            value: 345
            symbol: ml
      required:
        - min
        - max
    DoseRangeFunction:
      description: a range of permissible dose size. The User may select any value within the range (inclusive).
      type: object
      properties:
        _type:
          description: class of Dose Function
          type: string
          example: models.DoseRangeFunction
          enum:
            - models.DoseRangeFunction
        range:
          $ref: '#/components/schemas/DrugQuantityRange'
      required:
        - _type
        - range
    DoseRangeByWeightFunction:
      description: dose is specified as a range per unit of animal weight. The User may select any value within the range (inclusive).
      type: object
      properties:
        _type:
          description: class of Dose Function
          type: string
          example: models.DoseRangeByWeightFunction
          enum:
            - models.DoseRangeByWeightFunction
        range:
          $ref: '#/components/schemas/DrugQuantityRange'
        perUnit:
          $ref: '#/components/schemas/MassQuantity'
      example:
        perUnit:
          dimension: Mass
          value: 1
          symbol: kg
        _type: models.DoseRangeByWeightFunction
        range:
          min:
            quantity:
              dimension: volume
              value: 3
              symbol: ml
          max:
            quantity:
              dimension: volume
              value: 2
              symbol: ml
      required:
        - _type
        - range
        - perUnit
    SizeFunction:
      description: function to calculate dose size
      discriminator:
        propertyName: _type
        mapping:
          models.FixedDoseFunction: '#/components/schemas/FixedDoseFunction'
          models.DoseByWeightFunction: '#/components/schemas/DoseByWeightFunction'
          models.LoadingDoseByWeightFunction: '#/components/schemas/LoadingDoseByWeightFunction'
          models.DoseRangeFunction: '#/components/schemas/DoseRangeFunction'
          models.DoseRangeByWeightFunction: '#/components/schemas/SeqSeries'
      oneOf:
        - $ref: '#/components/schemas/FixedDoseFunction'
        - $ref: '#/components/schemas/DoseByWeightFunction'
        - $ref: '#/components/schemas/LoadingDoseByWeightFunction'
        - $ref: '#/components/schemas/DoseRangeFunction'
        - $ref: '#/components/schemas/DoseRangeByWeightFunction'
    DoseFunctions:
      type: object
      properties:
        sequenceFunction:
          $ref: '#/components/schemas/SequenceFunction'
        sizeFunction:
          $ref: '#/components/schemas/SizeFunction'
    Tag:
      description: keyword or tag for classification
      type: object
      properties:
        id:
          description: Tag ID number
          type: integer
          example: 8
        color:
          description: color code
          type: string
          example: '#516cc6'
        name:
          description: keyword code identifying tag
          type: string
          maxLength: 15
        fixes:
          type: array
          items:
            $ref: '#/components/schemas/Remedy'
      required:
        - id
        - color
        - name
    AmducaClass:
      type: string
      enum:
        - ONLABEL
        - OFFLABEL
        - UNIDENTIFIED
    Treatment:
      description: 'describes a series of one or more doses of a single product in terms of a sizeFunction (which specifies dose quantity) and a SequenceFunction (which specifies when the doses should be given). These functions are polymorphic and may depend on additional data which only is available when a protocol is assigned to a specific Case. For example, the initiation time will likely be needed to calculate the dose sequence and animal weight or other data may be needed to calculate dose size.'
      type: object
      properties:
        id:
          description: 'key value created by the database. If `id` is null or not present, a new database record will be created. If ''id'' matches an existing record in the db, that record will be updated instead.'
          type: string
          example: B-123
        ownerId:
          description: the `id` key of the VOR User who owns the treatment
          type: integer
          example: 0
        description:
          description: description of Treatment
          type: string
          example: 3.0 ml per kg repeat
        eligibilities:
          description: eligibility criteria for potential cases
          type: array
          items:
            $ref: '#/components/schemas/Eligibility'
        product:
          description: product name
          type: string
          example: MiracleMed
        _dose:
          description: transient string representation of `dosage`
          type: string
          example: 3.0 ml per kg repeat in 6 hours and again in 24 hours
        dosage:
          oneOf:
            - $ref: '#/components/schemas/DoseId'
            - $ref: '#/components/schemas/DoseFunctions'
        route:
          description: route of administration
          type: string
          example: wip
        sequenceFunction:
          $ref: '#/components/schemas/SequenceFunction'
        sizeFunction:
          $ref: '#/components/schemas/SizeFunction'
        wtMeatHrs:
          description: number of hours that must pass between exposure and slaughter
          type: integer
          example: wip
        wtMilkHrs:
          description: number of hours that must pass between exposure and extracting milk for consumption
          type: integer
          example: wip
        nada:
          description: NADA or ANADA as specified by the FDA
          type: string
          example: wip
        tags:
          description: keywords for classification
          type: array
          items:
            $ref: '#/components/schemas/Tag'
        note:
          description: further information about the treatment
          type: string
          format: html
          example: <p>a free-form note</p>
        amduca:
          $ref: '#/components/schemas/AmducaClass'
      required:
        - product
        - route
        - dosage
        - sequenceFunction
        - sizeFunction
    DoseId:
      type: object
      properties:
        doseId:
          description: key to a label dosage
          type: integer
          example: wip
    Diagnosis:
      description: |
        a medical diagnosis for which a Protocol may be used. Normally the `name` field is all that is shown in the UI, but the `id` is used internally to identify each Diagnosis, which should be treated as an immutable object. Changes to the array of Diagnoses in a Protocol are achieved by changing the array of `id` numbers. Changes to other fields will have no effect at the persistent layer.
      type: object
      properties:
        id:
          description: Diagnosis ID number
          type: integer
          example: 8
        name:
          description: free-form text description of the Diagnosis
          type: string
          example: 'Pain/inflammation (musculoskeletal), treatment'
          maxLength: 255
    Promise:
      description: An act which must be executed on or after enrollment of a Case to a Prescription
      type: object
      properties:
        _type:
          description: Class of Promise
          type: string
          example: models.IdPromise
          enum:
            - models.IdPromise
            - models.AffirmationPromise
            - models.BooleanPromise
            - models.StringPromise
            - models.MassPromise
            - models.CategoryPromise
        id:
          description: Promise ID number
          type: integer
          example: 2345
        name:
          description: promise name for the doctor
          type: string
          example: ID promise
        descrip:
          description: promise description for the client
          type: string
          example: You must give ID for each case enrolled
        query:
          description: question to be answered by client
          type: string
          format: html
          example: What is the animal's name or number?
        when:
          description: ISO-8601 duration from initiation when promise must be fulfilled
          type: string
          format: duration
          example: PT24H
          default: PT0H
      example: promise
      required:
        - _type
        - name
        - descrip
        - query
        - when
    StringPromise:
      description: identification of animal is required to enroll a case
      allOf:
        - $ref: '#/components/schemas/Promise'
        - type: object
          properties:
            response:
              $ref: '#/components/schemas/PDataString'
    CategoryPromise:
      description: identification of animal is required to enroll a case
      type: object
      allOf:
        - $ref: '#/components/schemas/Promise'
        - type: object
          properties:
            response:
              $ref: '#/components/schemas/PDataString'
    BooleanPromise:
      description: identification of animal is required to enroll a case
      type: object
      allOf:
        - $ref: '#/components/schemas/Promise'
        - type: object
          properties:
            response:
              $ref: '#/components/schemas/PDataBoolean'
    NumberPromise:
      description: identification of animal is required to enroll a case
      type: object
      allOf:
        - $ref: '#/components/schemas/Promise'
        - type: object
          properties:
            response:
              $ref: '#/components/schemas/PDataNumber'
    AffirmationPromise:
      description: identification of animal is required to enroll a case
      type: object
      allOf:
        - $ref: '#/components/schemas/Promise'
        - type: object
          properties:
            response:
              $ref: '#/components/schemas/PDataNone'
    MassPromise:
      description: identification of animal is required to enroll a case
      type: object
      allOf:
        - $ref: '#/components/schemas/Promise'
        - type: object
          properties:
            response:
              $ref: '#/components/schemas/PDataMass'
    Metadata:
      description: (for future development)
      type: object
      properties:
        key:
          description: key identifying data
          type: string
          example: popularity
        value:
          description: value associated with key
          type: string
          example: good 1.2
    Px:
      description: 'the flattened subset of a Protocol which can be retrieved from the Px database table alone, without additional queries.'
      type: object
      properties:
        id:
          description: unique identifier for Protocol
          type: integer
          example: 0
        ownerId:
          description: unique identifier for User that owns this Protocol
          type: integer
          example: 0
        name:
          description: user-friendly identifier for the Protocol
          type: string
          example: example protocol
        shortname:
          description: Short name for the Protocol
          type: string
          example: EXamp
        created:
          description: ISO-8601 timestamp for Protocol creation
          type: string
          format: date-time
          example: '2020-01-10T22:20:39Z'
        edited:
          description: ISO-8601 timestamp for Protocol update
          type: string
          format: date-time
          example: '2020-02-10T22:20:39Z'
        status:
          $ref: '#/components/schemas/ProtocolStatus'
        vetNote:
          description: note visible only to the prescribing vet
          type: string
          example: consider prescribing protocol x instead
        wtMeatHrs:
          description: number of hours that meat may not be sold for food after last treatment
          type: integer
          example: 72
        wtMilkHrs:
          description: number of hours that milk may not be sold for food after last treatment
          type: integer
          example: 72
        wtNote:
          description: note regarding withholding
          type: string
          example: Not for use in horses intended for food.
        considerations:
          description: free-form text specifying special considerations in choosing or using a protocol
          type: string
          format: html
          example: <p>think first</p>
        restrictions:
          description: free-form text note specifying restrictions
          type: string
          format: html
          example: <p>not suitable in pregnancy</p>
        dothis:
          description: free-form text specifying actions to be completed
          type: string
          format: html
          example: <p>execute protocol</p>
        recordthis:
          description: free-form text specifying data to record
          type: string
          format: html
          example: case data
        success:
          description: describes a successful outcome of the protocol
          type: string
          format: html
          example: <p>good</p>
        failure:
          description: describes a failure of the protocol
          type: string
          format: html
          example: <p>bad</p>
        references:
          description: wip references related to the disease or treatment
          type: string
          format: html
          example: '<a href="https://en.wikipedia.org/wiki/Rickrolling">Wikipedia</a>'
        shareAll:
          description: switch to determine whether this Protocol may be shared with all VOR users
          type: boolean
          example: true
          default: false
      required:
        - ownerId
        - name
        - created
        - edited
        - status
        - shareAll
    Protocol:
      description: a veterinary treatment protocol
      type: object
      properties:
        id:
          description: key value created by the database. If zero or null a new record will be created.
          type: integer
          format: int64
          example: 12345
        ownerId:
          description: the `id` key of the VOR User who owns the protocol.
          type: integer
          example: 1
        name:
          description: descriptive name of the protocol
          type: string
          example: wip
        shortname:
          description: short name for protocol
          type: string
          example: wip
        created:
          description: ISO-8601-formatted datetime added by the server when a Protocol is first saved
          type: string
          format: date-time
          example: '2020-01-10T10:30:37Z'
        edited:
          description: ISO-8601-formatted datetime updated by the server whenever a Protocol is saved
          type: string
          format: date-time
          example: '2020-02-10T10:30:37Z'
        status:
          $ref: '#/components/schemas/ProtocolStatus'
        vetNote:
          description: note visible only to the prescribing vet
          type: string
          example: consider prescribing protocol x instead
        wtMeatHrs:
          description: number of hours that must pass between exposure and slaughter
          type: number
          example: 22
        wtMilkHrs:
          description: number of hours that must pass between exposure and extracting milk for consumption
          type: number
          example: 5
        instructions:
          $ref: '#/components/schemas/Instructions'
        shareAll:
          description: share this protocol with all other vets using the system?
          type: boolean
          example: true
          default: false
        shareClonable:
          description: 'when shared to another vet, may the recipient create and alter a clone?'
          type: boolean
          example: true
          default: false
        caseDefinition:
          $ref: '#/components/schemas/CaseDefinition'
        treatments:
          description: treatments used in this protocol
          type: array
          items:
            $ref: '#/components/schemas/Treatment'
        tags:
          description: keywords for classification
          type: array
          items:
            $ref: '#/components/schemas/Tag'
        diagnoses:
          description: diagnostic classifiers
          type: array
          items:
            $ref: '#/components/schemas/Diagnosis'
        eligibilities:
          description: eligibility criteria for potential cases
          type: array
          items:
            $ref: '#/components/schemas/Eligibility'
        promises:
          description: wip
          type: array
          items:
            $ref: '#/components/schemas/Promise'
        metadata:
          type: array
          items:
            $ref: '#/components/schemas/Metadata'
      required:
        - ownerId
        - name
        - status
        - instructions
    Prescription:
      type: object
      properties:
        rxId:
          description: prescription identifier
          type: string
          example: gG3pBCR1GCMKm89c
        protocol:
          $ref: '#/components/schemas/Protocol'
        vorId:
          description: ID of VOR user who prescribed this
          type: integer
          example: 1
        morId:
          description: ID of MOR this is prescribed for
          type: integer
          example: 2
        refills:
          description: number of repeats for this prescription
          type: integer
          example: 0
          default: 0
        expiration:
          description: expiration date
          type: string
          format: date-time
          example: '2021-01-10T10:30:37Z'
        created:
          description: 'description: timestamp when prescribed first saved'
          type: string
          format: date-time
          example: '2021-08-10T10:30:37Z'
        metadata:
          type: array
          items:
            $ref: '#/components/schemas/Metadata'
        status:
          $ref: '#/components/schemas/ProtocolStatus'
      required:
        - vorId
        - morId
        - protocol
        - status
    Product:
      type: object
      properties:
        id:
          type: integer
        companyId:
          type: integer
        nada:
          type: string
        name:
          type: string
        imageURL:
          type: string
        insertURL:
          type: string
      required:
        - id
        - nada
        - name
        - companyId
    Case:
      description: A **_Case_** records use of a **_Prescription_** on an individual animal or group
      type: object
      properties:
        id:
          description: Case ID number
          type: integer
          format: int64
          example: 123
          default: null
        rxId:
          description: UUID identifying the prescription
          type: string
          example: gG3pBCR1GCMKm89c
        caseData:
          $ref: '#/components/schemas/CaseData'
        promiseData:
          description: promises attached to this case
          type: array
          items:
            $ref: '#/components/schemas/Promise'
      required:
        - id
        - rxId
        - caseData
        - promiseData
    TaskStatus:
      description: task status
      type: string
      example: REQUIRED
      enum:
        - REQUIRED
        - SUGGESTED
        - DUE
        - OPTIONAL
        - OVERDUE
        - CANCELLED
        - REJECTED
        - RECALLED
        - EXECUTED
        - UNKNOWN
    PDataNone:
      type: object
      properties:
        _type:
          description: identifies subtype of PData
          type: string
          example: models.PdataNone
          enum:
            - models.PdataNone
        promiseId:
          description: ID of promise to which this data is attached
          type: integer
          example: 123
          default: null
      required:
        - _type
        - promiseId
    PDataString:
      type: object
      properties:
        _type:
          description: identifies subtype of PData
          type: string
          example: models.PdataString
          enum:
            - models.PdataString
        promiseId:
          description: ID of promise to which this data is attached
          type: integer
          example: 123
          default: null
        dat:
          description: data to fulfill the Promise
          type: string
          example: full recovery
      required:
        - promiseId
        - dat
    PDataNumber:
      type: object
      properties:
        _type:
          description: identifies subtype of PData
          type: string
          example: models.PdataNumber
          enum:
            - models.PdataNumber
        promiseId:
          description: ID of promise to which this data is attached
          type: integer
          example: 123
          default: null
        dat:
          description: data to fulfill the Promise
          type: number
          example: 42
      required:
        - promiseId
        - dat
    PDataBoolean:
      type: object
      properties:
        _type:
          description: identifies subtype of PData
          type: string
          example: models.PDataBoolean
          enum:
            - models.PDataBoolean
        promiseId:
          description: ID of promise to which this data is attached
          type: integer
          example: 123
          default: null
        dat:
          description: data to fulfill the Promise
          type: boolean
          example: true
      required:
        - promiseId
        - dat
    PDataMass:
      type: object
      properties:
        _type:
          description: identifies subtype of PData
          type: string
          example: models.PdataMass
          enum:
            - models.PdataMass
        promiseId:
          description: id number of Promise
          type: integer
          example: 123
          default: null
        dat:
          $ref: '#/components/schemas/MassQuantity'
      required:
        - promiseId
        - dat
    PData:
      description: a task
      discriminator:
        propertyName: _type
        mapping:
          models.PDataNone: '#/components/schemas/PDataNone'
          models.PDataString: '#/components/schemas/PDataString'
          models.PDataNumber: '#/components/schemas/PDataNumber'
          models.PDataBoolean: '#/components/schemas/PDataBoolean'
          models.PDataMass: '#/components/schemas/PDataMass'
      oneOf:
        - $ref: '#/components/schemas/PDataNone'
        - $ref: '#/components/schemas/PDataString'
        - $ref: '#/components/schemas/PDataNumber'
        - $ref: '#/components/schemas/PDataBoolean'
        - $ref: '#/components/schemas/PDataMass'
    DoseByClass:
      description: dose calculated by class
      type: object
      properties:
        _type:
          description: class of Dose Function
          type: string
          example: models.DoseByClass
          enum:
            - models.DoseByClass
        animalClasses:
          type: array
          items:
            $ref: '#/components/schemas/FixedDoseFunction'
      example: '{"_type":"models.DoseByClass","animalClasses":[{"animalClass":"Jabberwocks","sizeFunction":{"unit":"mg","size":3.2,"_type":"models.DrugQuantity"}},{"animalClass":"Borogoves","sizeFunction":{"_type":"models.DoseRangeFunction","maxDose":{"size":20,"unit":"ml"},"minDose":{"size":10,"unit":"ml"}}}]}'
      required:
        - _type
        - animalClasses
    CaseData:
      description: data for an individual Case
      type: object
      properties:
        id:
          description: ID number for the **_Case_**
          type: integer
          example: 0
        rxId:
          description: UUID identifying the prescription
          type: string
          example: gG3pBCR1GCMKm89c
        caseData:
          oneOf:
            - $ref: '#/components/schemas/IdData'
            - $ref: '#/components/schemas/WeightData'
            - $ref: '#/components/schemas/PreferredDoseData'
            - $ref: '#/components/schemas/PrefDoseRateData'
            - $ref: '#/components/schemas/AnimalClassData'
      discriminator:
        propertyName: _type
        mapping:
          models.IdData: '#/components/schemas/IdData'
          models.WeightData: '#/components/schemas/WeightData'
          models.PreferredDoseData: '#/components/schemas/PreferredDoseData'
          models.PrefDoseRateData: '#/components/schemas/PrefDoseRateData'
          models.AnimalClassData: '#/components/schemas/AnimalClassData'
    IdData:
      description: identifies animal or group treated in the **_Case_**
      type: object
      properties:
        _type:
          description: Class of CaseData
          type: string
          example: models.IdData
          enum:
            - models.IdData
        animalId:
          description: text description identifying the animal or group
          type: string
          example: Bossie
        initiationTime:
          description: when the **_Case_** is initiated
          type: string
          format: date-time
          example: '2020-01-10T10:30:37Z'
    PreferredDoseData:
      description: animal identity and preferred dose
      type: object
      properties:
        _type:
          description: Class of CaseData
          type: string
          example: models.PrefDoseRateData
          enum:
            - models.PreferredDoseData
        animalId:
          description: text description identifying the animal or group
          type: string
          example: Bossie
        preferredDose:
          $ref: '#/components/schemas/DrugQuantity'
        initiationTime:
          description: when the **_Case_** is initiated
          type: string
          format: date-time
          example: '2020-04-10T10:30:37Z'
      required:
        - animalId
        - initiationTime
        - preferredDose
    PrefDoseRateData:
      description: weight of animal and preferred dose
      type: object
      properties:
        _type:
          description: identifies subtype of CaseData
          type: string
          example: models.PrefDoseRateData
          enum:
            - models.PrefDoseRateData
        animalId:
          description: text description identifying the animal or group
          type: integer
          example: 123
          default: null
        initiationTime:
          description: when the **_Case_** is initiated
          type: string
          format: date-time
          example: '2020-01-10T10:30:37Z'
        weight:
          $ref: '#/components/schemas/MassQuantity'
        preferredDose:
          $ref: '#/components/schemas/DrugQuantity'
      required:
        - animalId
        - initiationTime
        - preferredDose
        - weight
    AnimalClassData:
      description: data for a class of animals
      type: object
      properties:
        _type:
          description: Class of CaseData
          type: string
          example: models.AnimalClassData
          enum:
            - models.AnimalClassData
        animalId:
          description: text description identifying the animal or group
          type: integer
          example: 123
          default: null
        initiationTime:
          description: when the **_Case_** is initiated
          type: string
          format: date-time
          example: '2020-01-10T10:30:37Z'
        animalClass:
          $ref: '#/components/schemas/AnimalClass'
      required:
        - animalId
        - initiationTime
        - animalClass
    AnimalClass:
      description: a class of animals and a SizeFunction for dosing that class
      type: object
      properties:
        animalClass:
          description: descrip
          type: string
          example: Jabberwocks
        sizeFunction:
          $ref: '#/components/schemas/SizeFunction'
      required:
        - animalClass
        - sizeFunction
    WeightData:
      description: specifies animal's weight
      type: object
      properties:
        _type:
          description: identifies subtype of CaseData
          type: string
          example: models.WeightData
          enum:
            - models.WeightData
        animalId:
          description: text description identifying the animal or group
          type: string
          example: Bossie
        weight:
          $ref: '#/components/schemas/MassQuantity'
        initiationTime:
          description: when the **_Case_** is initiated
          type: string
          format: date-time
          example: '2020-01-10T10:30:37Z'
    Withhold:
      description: a time before which meat or milk may not be sold.
      type: object
      properties:
        id:
          description: key for withhold
          type: integer
        caseId:
          description: key identifying Case
          type: integer
        animalId:
          description: key identifying animal or group
          type: string
          example: Bossie
        initiated:
          description: when the Withhold was initiated
          type: string
          format: date-time
        wtMeatUntil:
          description: when the Withhold ends for meat products
          type: string
          format: date-time
        wtMilkUntil:
          description: when the Withhold ends for milk
          type: string
          format: date-time
        note:
          description: note
          type: string
      required:
        - id
        - caseId
        - animalId
        - initiated
        - wtMeatUntil
        - wtMilkUntil
    AnimalTask:
      description: a task related to an animal or group of animals
      discriminator:
        propertyName: _type
        mapping:
          models.PTask: '#/components/schemas/PTask'
          models.DoseTask: '#/components/schemas/DoseTask'
      oneOf:
        - $ref: '#/components/schemas/PTask'
        - $ref: '#/components/schemas/DoseTask'
    TaskBase:
      description: the base data common to all the polymorphic AnimalTask subtypes
      type: object
      properties:
        _type:
          description: 'identifies the task subtype as shown in the AnimalTask discriminator mapping, like ` models.DoseTask`'
          type: string
        id:
          description: PTask ID number
          type: integer
          format: int64
          example: 123
        caseId:
          description: ID number of Case that includes this task
          type: integer
          format: int64
          example: 123
        morId:
          description: ID of MOR user responsible for execution of this task
          type: integer
          format: int64
          example: 123
        vorId:
          description: ID of VOR prescribing the task
          type: integer
          format: int64
          example: 123
        animalId:
          description: ID of animal to which the task applies
          type: string
          example: this
        doAt:
          description: ISO-8601-formatted datetime when the task should be executed
          type: string
          format: date-time
          example: '2020-01-10T10:30:37Z'
        executor:
          description: ID of Person who should execute the task
          type: integer
          format: int64
          example: 123
        status:
          $ref: '#/components/schemas/TaskStatus'
      required:
        - _type
        - id
        - caseId
        - morId
        - vorId
        - promId
        - animalId
        - doAt
        - status
    PTask:
      description: A Task required to fulfill a Promise
      type: object
      properties:
        promId:
          description: ID of Promise
          type: integer
          format: int64
          example: 123
        data:
          $ref: '#/components/schemas/PData'
      allOf:
        - $ref: '#/components/schemas/TaskBase'
        - type: object
          required:
            - detail
          properties:
            detail:
              type: string
      required:
        - promId
        - data
    DoseTask:
      type: object
      properties:
        product:
          description: product to be administered
          type: string
          example: Calcium gluconate 23%
        route:
          description: route of administration
          type: string
          example: IV
        dose:
          $ref: '#/components/schemas/DrugQuantity'
      allOf:
        - $ref: '#/components/schemas/TaskBase'
        - type: object
          required:
            - detail
          properties:
            detail:
              type: string
      required:
        - product
        - route
        - dose
    LabelClaim:
      type: object
      properties:
        id:
          description: unique identifier for label
          type: integer
          example: 1
        fdaSpecies:
          $ref: '#/components/schemas/FDAspecies'
        diagnosis:
          description: label diagnosis
          type: string
          example: 'pain (colic), symptomatic treatment'
        dxId:
          description: id of label diagnosis
          type: integer
          example: 2002
        product:
          description: product trade name
          type: string
          example: Prevail™ Flunixin Meglumine Injection
        productId:
          description: unique identifier for the product described
          type: integer
          example: 1315018
        _dose:
          description: free-form text note on dosage
          type: string
          example: 3.0 ml per kg repeat in 6 hours and again in 24 hours
        route:
          description: route of administration
          type: string
          example: intr-corporeal
        sequenceFunction:
          $ref: '#/components/schemas/SequenceFunction'
        sizeFunction:
          $ref: '#/components/schemas/SizeFunction'
        doseNote:
          description: test note about dose
          type: string
          format: html
          example: THis can contain <b>html</b> tags
        wtMeatHrs:
          description: meat withholding in hours
          type: integer
          example: 22
        wtMilkHrs:
          description: milk withholding in hours
          type: integer
          example: 5
        wtNote:
          description: note on withholding
          type: string
          example: not for dairy animals
        ndc:
          description: FDA NADA or ANADA number
          type: string
          example: 200-308
        generic:
          description: generic name for product
          type: string
          example: OXYTETRACYCLINE
      required:
        - id
        - fdaSpecies
        - diagnosis
        - dxId
        - product
        - route
        - wtMeatHrs
        - wtMilkHrs
    Login:
      type: object
      properties:
        userId:
          type: integer
          example: 1
          default: null
        when:
          description: 'timestamp of login, entered'
          type: string
          format: date-time
          example: '2020-01-10T10:30:37Z'
        message:
          type: string
          example: some message
      required:
        - userid
        - message
      x-reviewed: JLE 2022/5/30
    FDAspecies:
      description: 'a class of animals recognized by the FDA. In FDA literature this is called a "species", which conflicts with the typical usage of that word. "fdaSpecies" in the labeling domain usually corresponds with "Eligibility" in the Protocol domain.'
      type: array
      items:
        type: string
        enum:
          - BeefCattle
          - Calves
          - CalvesNotVeal
          - Cats
          - Chickens
          - ChickensBroilers
          - ChickensNotLaying
          - ChickensReplacements
          - DairyCalves
          - DairyHeifers
          - DairyCattle
          - DairyCattleNonLactating
          - Dogs
          - Fish
          - Goats
          - Horses
          - Sheep
          - Swine
          - SwineBreeding
          - Turkeys
          - TurkeysGrowing
          - TurkeysMeatProducing
          - TurkeysNotLaying
          - Catfish
          - Gamebirds
          - Llamas
          - Salmon
          - Emus
          - Bison
          - Other
          - Unidentified
        example: ChickensBroilers
    GreenbookDrug:
      type: object
      properties:
        ndc:
          description: FDA NDC number
          type: string
          example: 0010-3495
        proprietery:
          description: proprietary name
          type: string
          example: Bio-Mycin 200
        nonProp:
          description: generic name
          type: string
          example: OXYTETRACYCLINE
        ingredients:
          description: ingredient or ingredients
          type: string
          example: OXYTETRACYCLINE
        labeler:
          description: name of labeler
          type: string
          example: 'Boehringer Ingelheim Vetmedica, Inc.'
        productType:
          description: type of product
          type: string
          example: OTC ANIMAL DRUG
        marketCat:
          description: market category
          type: string
          example: ANADA
        appNumber:
          description: application number
          type: string
          example: ANADA200008
        link:
          description: public link to fda label
          type: string
          example: 'https://www.accessdata.fda.gov/spl/data/c9491ada-6813-4548-8872-57bb38a58feb/c9491ada-6813-4548-8872-57bb38a58feb.xml'
        status:
          description: FDA status
          type: integer
          example: 0
        lastChanged:
          description: date of last label change
          type: string
          format: date-time
          example: '2020-05-16T16:19:12Z'
      required:
        - ndc
        - proprietery
        - nonProp
        - ingredients
        - labeler
        - productType
        - marketCat
        - appNumber
        - link
        - status
        - lastChanged
    HelpScreen:
      type: object
      properties:
        key:
          type: string
        msg:
          description: the html message to display
          type: string
          format: html
        lang:
          description: language code
          type: string
      required:
        - key
        - msg
  examples:
    prescription:
      value: '{"protocol":{"ownerId":1,"name":"example protocol","shortname":"EXamp","created":"2020-01-10T22:20:39Z","edited":"2020-01-10T22:20:39Z","status":"SAVED","wtMeatHrs":44,"wtMilkHrs":12,"withholdNote":"be sure to wt","instructions":{"considerations":"think first","restrictions":"always","dothis":"execute protocol","recordthis":"case data","success":"good","failure":"bad","references":"ref"},"shareAll":false,"shareClonable":false,"caseDefinition":{"pxId":0,"medical":"really sick","economic":"lotsa cash"},"treatments":[{"id":0,"ownerId":0,"description":"sample w 30d meat","note":"this is an off-label Treatment","eligibilities":[{"id":1,"name":"Beef Cattle","fdaSpecies":"BeefCattle"}],"tags":[{"id":-1,"color":"#516cc6","name":"EXAMPLE"}],"labelId":null,"product":"MiracleMed","_dose":"3.0 ml per kg starting at initiation, repeat in 6 hours and again in 1 day","route":"intr-corporeal","sequenceFunction":{"_type":"models.SeqSeries","intervals":["PT6H","PT24H"]},"sizeFunction":{"_type":"models.DoseByWeightFunction","dose":{"quantity":{"dimension":"Volume","value":3,"symbol":"ml"}},"perUnit":{"dimension":"Mass","value":1,"symbol":"kg"}},"wtMeatHrs":null,"wtMilkHrs":null,"wtNote":null}],"tags":[{"id":-1,"color":"#516cc6","name":"EXAMPLE"}],"diagnoses":[{"id":8,"name":"Pain/inflammation (musculoskeletal), treatment"}],"eligibility":{"id":1,"name":"Beef Cattle","fdaSpecies":"BeefCattle"},"promises":[]},"vorId":1,"morId":2,"refills":3,"status":"PRESCRIBED","metadata":[],"rxId":"gG3pBCR1GCMKm89c","created":"2020-01-10T10:30:37Z"}'
      summary: Rx.example 1/7/22
    protocol:
      value: '{"ownerId":1,"name":"example protocol","shortname":"EXamp","created":"2020-01-10T22:20:39Z","edited":"2020-01-10T22:20:39Z","status":"SAVED","wtMeatHrs":44,"wtMilkHrs":12,"withholdNote":"be sure to wt","instructions":{"considerations":"think first","restrictions":"always","dothis":"execute protocol","recordthis":"case data","success":"good","failure":"bad","references":"ref"},"shareAll":false,"shareClonable":false,"caseDefinition":{"pxId":0,"medical":"really sick","economic":"lotsa cash"},"treatments":[{"id":0,"ownerId":0,"description":"sample w 30d meat","note":"this is an off-label Treatment","eligibilities":[{"id":1,"name":"Beef Cattle","fdaSpecies":"BeefCattle"}],"tags":[{"id":-1,"color":"#516cc6","name":"EXAMPLE"}],"labelId":null,"product":"MiracleMed","_dose":"3.0 ml per kg starting at initiation, repeat in 6 hours and again in 1 day","route":"intr-corporeal","sequenceFunction":{"_type":"models.SeqSeries","intervals":["PT6H","PT24H"]},"sizeFunction":{"_type":"models.DoseByWeightFunction","dose":{"quantity":{"dimension":"Volume","value":3,"symbol":"ml"}},"perUnit":{"dimension":"Mass","value":1,"symbol":"kg"}},"wtMeatHrs":null,"wtMilkHrs":null,"wtNote":null}],"tags":[{"id":-1,"color":"#516cc6","name":"EXAMPLE"}],"diagnoses":[{"id":8,"name":"Pain/inflammation (musculoskeletal), treatment"}],"eligibility":{"id":1,"name":"Beef Cattle","fdaSpecies":"BeefCattle"},"promises":[]}'
      summary: Protocol.example 1/7/22
    comment:
      value: '{"userId":0,"public":false,"created":"2020-01-10T22:20:39Z","comment":"this is an anonymous private comment"}'
      summary: Comment.example 1/7/22
    address:
      value: '{"userId":3,"busName":"Some Business","address1":"123 Main St.","town":"Anytown","state":"Any State","zip":"12345","country":"USA"}'
      summary: Address.example 1/7/22
    user:
      value: '{"id":3,"uname":"testTOR","userType":"TOR","email":"testTOR@dairysight.com","firstname":"Test","lastname":"Tech"}'
      summary: User.example 1/7/22
    dose:
      value: '{"product":"MiracleMed","dose":{"quantity":{"dimension":"Volume","value":3,"symbol":"ml"}},"route":"intramuscular injection","animalId":"Bossie","doAt":"2020-05-16T16:19:12Z","executor":2,"status":"REQUIRED"}'
      summary: Dose.example 1/7/22
    treatment:
      value: '{"id":0,"ownerId":0,"description":"sample w 30d meat","note":"this is an off-label Treatment","eligibilities":[{"id":1,"name":"Beef Cattle","fdaSpecies":"BeefCattle"}],"tags":[{"id":-1,"color":"#516cc6","name":"EXAMPLE"}],"labelId":null,"product":"MiracleMed","_dose":"3.0 ml per kg starting at initiation, repeat in 6 hours and again in 1 day","route":"intr-corporeal","sequenceFunction":{"_type":"models.SeqSeries","intervals":["PT6H","PT24H"]},"sizeFunction":{"_type":"models.DoseByWeightFunction","dose":{"quantity":{"dimension":"Volume","value":3,"symbol":"ml"}},"perUnit":{"dimension":"Mass","value":1,"symbol":"kg"}},"wtMeatHrs":null,"wtMilkHrs":null,"wtNote":null}'
      summary: Treatment.example 1/7/22
    volumeQ:
      value: '{"quantity":{"dimension":"Volume","value":3,"symbol":"ml"}}'
      summary: VolumeQ.example 1/7/22
    massQ:
      value: '{"quantity":{"dimension":"Mass","value":3,"symbol":"oz"}}'
      summary: MassQ.example 1/7/22
    dimensionlessQ:
      value: ''
      summary: DimensionlessQ.example 1/7/22
  responses:
    NoContent:
      description: There is no content to send for this request.
    BadRequest:
      description: The server can not understand the request due to invalid syntax.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    Unauthorized:
      description: Authorization required
    Forbidden:
      description: The user does not have access rights to the content.
    NotFound:
      description: The server can not find the requested resource.
  securitySchemes:
    authToken:
      type: apiKey
      in: header
      name: X-Auth-Token
      description: JWT token stored in request header.
tags:
  - name: VOR
    description: available to veterinarians.
  - name: MOR
    description: available to farm managers.
  - name: ALL_USERS
    description: available to all users.
  - name: SAOR
    description: available to system administrators.
  - name: TOR
    description: available to farm employees.
  - name: LOR
    description: available to pharmacy curators.
  - name: FARM
    description: available to farm accounts.
  - name: CLINIC
    description: available to vet clinic accounts.
  - name: User
    description: Endpoints and models related to user management.
  - name: Protocol
    description: Endpoints and models related to protocol management.
  - name: Prescription
    description: Endpoints and models related to prescription management.
  - name: Case
    description: Endpoints and models related to case management.
  - name: Promise
    description: Endpoints and models related to promise management.
security:
  - authToken: []
